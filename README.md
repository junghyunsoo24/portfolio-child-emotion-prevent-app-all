# AI 감정 분석과 챗봇을 활용한 학대 피해 아동 모니터링 및 상담 앱

## 활동
* 2023년 1년간 한이음 프로젝트 참여하여 삼성 SDS 데브옵스 현직 멘토님 도움을 얻어 프로젝트 수행완료
* 특허출원
* 처음으로 프론트-백엔드-배포까지 가능한 어플리케이션 개발 

## 팀 구성
| 인원 | 역할 |
| -- | -- |
| 정현수 | 프론트엔드 앱개발 |
| 김성률 | 백엔드, 감정분석모델 개발|
| 안소정 | 배포, 운영 |

## 1. 문제 정의
### 1.1 문제 정의
 1) 가정학대로 어린이 사망 사건이 지속적으로 증가
    -아동 학대 사례 건수: 2019년 30,045건, 2020년 30,905건, 2021년 37,605건
     (KOSIS, 학대 피해 아동 보호 현황, 사례 판단 결과 (2018~2021))

    -1세 미만 15세 아동 학대 사망 수: 2019년 42건, 2020년 43건, 2021년 40건
     (KOSIS, 아동 학대 사망사례 발생 현황 (2018~2021))
 
2) 재학대 발생 건수 3년간 지속적으로 증가
   -재학대 발생 건수: 2019년 3,431건, 2020년 3,671건, 2021년 5,517건
    (KOSIS, 재학대 사례 발생 건 (2016~2021))

   -재학대 아동 수: 2019년 2,776명, 2020년 2,876명, 2021년 4,176명
    (KOSIS, 재학대 사례 발생 건 (2016~2021))

3) 현재 학대 피해 아동을 선제적으로 발굴하는 e아동행복지원시스템이 존재하나, 아동의 감정을 직접적으로 파악하는 방식이 아님.
   
     -e아동행복지원시스템은 아동의 건강검진과 백신 접종 여부, 가정의 단수 및 단전 등의 데이터로 학대 피해 아동을 예측함
   
     -아동의 심리 상태를 직접적으로 파악할 수 있는 모니터링 시스템이 있다면, 위 시스템을 보완하여 아동 학대 사건들을 감소시키는데 도움이 될 것을 기대하여추진

### 1.2 목표
  1) 감정 분석을 통한 선제적 발굴
     
    -감정 분석 기술을 활용하여 위기 아동을 예측하여 모니터링 하는 것이 목표
    
    -챗봇과 나눈 아동의 대화 문장을 분석하여 아동의 감정 상태 파악
    
    -아동의 위기 상황을 조기에 감지 하여 조치를 취할 수 있으며, 선제적인 대응으로 학대 예방에 기여할 수 있음.
    
  2) 재학대 예측 및 대응
     
    -전문가가 판단하여 재학대 가능성이 있거나 학대 위험이 있는 아동들을 예측하고, 실시간 채팅을 통해 조기에 도움을 제공할 수 있음.
    
  3) 전문가와의 채팅 제공
     
    -학대 위험이 있는 아동들에게 필요시 전문가와의 채팅을 제공함.
    
    -전문가의 도움을 받으면서 자신의 어려움을 표현하고 공감을 받을 수 있으며, 학대로부터의 회복을 지원받을 수 있음.
    
  4) e아동행복지원시스템 보완
     
    -기존의 e아동행복지원시스템과 달리 대화를 통해 아동의 감정을 지속적으로 파악하여 학대 피해 아동을 예측함.
    
    -아동들은 자신의 감정을 표현하고 이해받을 수 있으며, 보다 개인화된 지원을받을 수 있음.
    
    -대화를 통해 아동의 상태와 필요에 따라 적절한 조치를 취할 수 있음.

## 2. 시스템 구조
![image](https://github.com/junghyunsoo24/hanium-child-emotion-prevent-app-all/assets/117528532/a35fd467-c5cd-42a2-a6ae-61253323806c)

## 3. 구현기술
### 3.1 안드로이드 
1. Kotlin을 이용해 안드로이드 Native 앱 개발 
2. Socket.IO를 이용하여 실시간 양방향 채팅할 수 있도록 구현
3. 데이터가 공유될 수 있도록 ViewModel 아키텍처 컴포넌트 이용
4. UI 업데이트 간소화 및 일관성 유지를 위해서 DataBinding 이용
5. 그래프를 활용할 수 있도록 MPAndroidChart 라이브러리 이용
### 3.2 챗봇 모델
1. openAI의 GPT-4 챗봇 모델 사용
2. QnA의 형태가 아닌 감정적이거나 일상적인 대화를 할 수 있도록 AI Hub
데이터 셋을 통한 학습
3. 사전 프롬프트 작업을 통해 공감 잘하는 챗봇으로 학습
### 3.3 감정 분석 모델
1. RNN, LSTM, GRU, Bi-LSTM 등의 신경망들로 텍스트 다중 분류 모델을 개발하여 성능을 비교하고 가장 나은 학습 신경망 모델을 사용
### 3.4 백엔드
API 서버(클라이언트와 통신하는 서버), 챗봇 서버(사용자 문장에 대한 답변 API 호출 서버), 
감정 분석 서버(청소년 문장의 감정 분석), 채팅 서버(청소년과 전문가 간 채팅) 개발
1) API 서버
   (1) NestJS 프레임워크를 사용
   (2) 클라이언트와 통신하기 위한 엔드포인트를 제공
   (3) 사용자 정보와 관련된 내용에 대해 데이터베이스에 접근   
2) 챗봇 서버, 감정 분석 서버
   Flask 프레임워크를 사용
3) 채팅 서버
   Socket.io와 Redis를 활용해 전문가와 청소년 간 실시간 양방향 채팅 구현
### 3.5 배포
#### 1) 서버구축
  Nginx를 이용한 80번 포트를 사용하는 Http 서비스 구성
  Nginx를 활용한 API 서버 및 채팅 서버 간의 리버스 프록시 설정
#### 2) 도커를 활용한 가용성 및 배포
  Docker를 사용하여 각 서버 역할을 하는 컨테이너로 패키징
### 3.6 데이터베이스
#### 1) AWS RDS 활용
  AWS RDS를 이용하여 데이터베이스를 외부로 분리하여 안정적인 접근 및   확장성을 확보하고 데이터 일관성과 안정성을 유지

## 4. 모바일 화면
* 대화하기
  
![image](https://github.com/junghyunsoo24/hanium-child-emotion-prevent-app-all/assets/117528532/42d6b912-4b0d-48ff-a54a-bd9e071d0c03)

* 감정 조회
  
![image](https://github.com/junghyunsoo24/hanium-child-emotion-prevent-app-all/assets/117528532/33b6154d-9155-4696-9e99-6ba2c31ef81a)

* 채팅 상담
  
![image](https://github.com/junghyunsoo24/hanium-child-emotion-prevent-app-all/assets/117528532/f5830114-f73f-42fc-a224-d53fad68fc0b)

* 아동 할당
  
![image](https://github.com/junghyunsoo24/hanium-child-emotion-prevent-app-all/assets/117528532/9d013eeb-13c4-4eba-a75d-259951af9e37)

